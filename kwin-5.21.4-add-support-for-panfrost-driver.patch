diff -Naur kwin-5.21.4/effects/backgroundcontrast/contrast.cpp kwin-5.21.4-panfrost/effects/backgroundcontrast/contrast.cpp
--- kwin-5.21.4/effects/backgroundcontrast/contrast.cpp	2021-04-06 12:27:01.000000000 +0000
+++ kwin-5.21.4-panfrost/effects/backgroundcontrast/contrast.cpp	2021-04-22 20:11:18.986619158 +0000
@@ -256,6 +256,8 @@
 
     if (gl->isIntel() && gl->chipClass() < SandyBridge)
         return false;
+    if (gl->isPanfrost() && gl->chipClass() <= MaliT8XX)
+        return false;
     if (gl->isSoftwareEmulation()) {
         return false;
     }
diff -Naur kwin-5.21.4/effects/blur/blur.cpp kwin-5.21.4-panfrost/effects/blur/blur.cpp
--- kwin-5.21.4/effects/blur/blur.cpp	2021-04-06 12:27:01.000000000 +0000
+++ kwin-5.21.4-panfrost/effects/blur/blur.cpp	2021-04-22 13:12:32.464832210 +0000
@@ -356,6 +356,11 @@
 
     if (gl->isIntel() && gl->chipClass() < SandyBridge)
         return false;
+
+    if (gl->isPanfrost() && gl->chipClass() <= MaliT8XX) {
+        return false;
+    }
+
     if (gl->isSoftwareEmulation()) {
         return false;
     }
diff -Naur kwin-5.21.4/libkwineffects/kwinglplatform.cpp kwin-5.21.4-panfrost/libkwineffects/kwinglplatform.cpp
--- kwin-5.21.4/libkwineffects/kwinglplatform.cpp	2021-04-06 12:27:01.000000000 +0000
+++ kwin-5.21.4-panfrost/libkwineffects/kwinglplatform.cpp	2021-04-22 10:33:26.255098368 +0000
@@ -463,6 +463,25 @@
     return UnknownAdreno;
 }
 
+static ChipClass detectPanfrostClass(const QByteArray &chipClass)
+{
+
+    if (chipClass.contains("T720")   ||
+           chipClass.contains("T760"))
+        return MaliT7XX;
+
+    if (chipClass.contains("T820")   ||
+           chipClass.contains("T860"))
+        return MaliT8XX;
+
+    if (chipClass.contains("G31")   ||
+           chipClass.contains("G52") ||
+           chipClass.contains("G72"))
+        return MaliGXX;
+
+    return UnknownPanfrost;
+}
+
 QString GLPlatform::versionToString(qint64 version)
 {
     return QString::fromLatin1(versionToString8(version));
@@ -523,6 +542,8 @@
         return QByteArrayLiteral("Qualcomm");
     case Driver_Virgl:
         return QByteArrayLiteral("Virgl (virtio-gpu, Qemu/KVM guest)");
+    case Driver_Panfrost:
+        return QByteArrayLiteral("Panfrost");
 
     default:
         return QByteArrayLiteral("Unknown");
@@ -604,6 +625,13 @@
     case Adreno5XX:
         return QByteArrayLiteral("Adreno 5xx series");
 
+    case MaliT7XX:
+        return QByteArrayLiteral("Mali T7xx series");
+    case MaliT8XX:
+        return QByteArrayLiteral("Mali T8xx series");
+    case MaliGXX:
+        return QByteArrayLiteral("Mali Gxx series");
+
     default:
         return QByteArrayLiteral("Unknown");
     }
@@ -787,6 +815,11 @@
         m_chipClass = detectQualcommClass(m_renderer);
     }
 
+    else if (m_renderer.contains("Panfrost")) {
+        m_driver = Driver_Panfrost;
+        m_chipClass = detectPanfrostClass(m_renderer);
+     }
+
     else if (m_renderer == "Software Rasterizer") {
         m_driver = Driver_Swrast;
     }
@@ -912,6 +945,7 @@
         else if (m_renderer == "virgl") {
             m_driver = Driver_Virgl;
         }
+
     }
 
     // Driver/GPU specific features
@@ -984,6 +1018,15 @@
         }
     }
 
+    if (isPanfrost()) {
+        m_recommendedCompositor = OpenGL2Compositing;
+
+        if (m_chipClass <= MaliT8XX) {
+            // GLSL causes dramatic FPS drop on this GPU
+            m_supportsGLSL = false;
+        }
+    }
+
     if (isMesaDriver() && platformInterface == EglPlatformInterface) {
         // According to the reference implementation in
         // mesa/demos/src/egl/opengles1/texture_from_pixmap
@@ -1204,6 +1247,11 @@
     return m_chipClass >= Adreno1XX && m_chipClass <= UnknownAdreno;
 }
 
+bool GLPlatform::isPanfrost() const
+{
+    return m_chipClass >= MaliT7XX && m_chipClass <= UnknownPanfrost;
+}
+
 const QByteArray &GLPlatform::glRendererString() const
 {
     return m_renderer;
diff -Naur kwin-5.21.4/libkwineffects/kwinglplatform.h kwin-5.21.4-panfrost/libkwineffects/kwinglplatform.h
--- kwin-5.21.4/libkwineffects/kwinglplatform.h	2021-04-06 12:27:01.000000000 +0000
+++ kwin-5.21.4-panfrost/libkwineffects/kwinglplatform.h	2021-04-21 20:13:11.723998674 +0000
@@ -93,6 +93,7 @@
     Driver_Qualcomm,
     Driver_RadeonSI,
     Driver_Virgl,
+    Driver_Panfrost,
     Driver_Unknown
 };
 
@@ -142,6 +143,13 @@
     Adreno5XX,              // GLES3.1 CL2.0 DX11.2
     UnknownAdreno = 3999,
 
+    // Panfrost Mali
+    // from https://docs.mesa3d.org/drivers/panfrost.html
+    MaliT7XX      = 4000,   // GLES2.0
+    MaliT8XX,               // GLES3.0
+    MaliGXX,                // GLES3.0
+    UnknownPanfrost = 4999,
+
     UnknownChipClass = 99999
 };
 
@@ -287,6 +295,12 @@
     bool isVirgl() const;
 
     /**
+     * @returns @c true if the "GPU" is a Panfrost Mali GPU
+     * @since 5.21.4
+     **/
+    bool isPanfrost() const;
+
+    /**
      * @returns the GL_VERSION string as provided by the driver.
      * @since 4.9
      */
